Source:
https://src.fedoraproject.org/rpms/js/blob/f26/f/aarch64.patch
[Bernd: patched js/src/configure instead of js/src/configure.in]

Patch position 6:
https://src.fedoraproject.org/rpms/js/blob/master/f/js.spec#_19

Signed-off-by: Bernd Kuhls <bernd.kuhls@t-online.de>

--- js-1.8.5.org/js/src/assembler/jit/ExecutableAllocator.h
+++ js-1.8.5/js/src/assembler/jit/ExecutableAllocator.h
@@ -391,6 +391,12 @@
     {
         CacheRangeFlush(code, size, CACHE_SYNC_ALL);
     }
+#elif WTF_CPU_AARCH64 && WTF_PLATFORM_LINUX
+    static void cacheFlush(void* code, size_t size)
+    {
+        intptr_t end = reinterpret_cast<intptr_t>(code) + size;
+        __builtin___clear_cache(reinterpret_cast<char*>(code), reinterpret_cast<char*>(end));
+    }
 #else
     #error "The cacheFlush support is missing on this platform."
 #endif
--- js-1.8.5.org/js/src/assembler/wtf/Platform.h
+++ js-1.8.5/js/src/assembler/wtf/Platform.h
@@ -292,6 +292,10 @@
 
 #endif /* ARM */
 
+/* CPU(AArch64) - 64-bit ARM */
+#if defined(__aarch64__)
+#define WTF_CPU_AARCH64 1
+#endif
 
 
 /* Operating systems - low-level dependencies */
--- js-1.8.5.org/js/src/configure
+++ js-1.8.5/js/src/configure
@@ -5805,6 +5805,10 @@
     CPU_ARCH=arm
     ;;
 
+aarch64)
+    CPU_ARCH=aarch64
+    ;;
+
 mips|mipsel)
     CPU_ARCH="mips"
     ;;
--- js-1.8.5.org/js/src/Makefile.in
+++ js-1.8.5/js/src/Makefile.in
@@ -382,7 +382,7 @@
 # END enclude sources for V8 dtoa
 #############################################
 
-ifeq (,$(filter-out powerpc powerpc64 sparc sparc64 s390 s390x,$(TARGET_CPU)))
+ifeq (,$(filter-out aarch64 powerpc powerpc64 sparc sparc64 s390 s390x,$(TARGET_CPU)))
 
 VPATH +=	$(srcdir)/assembler \
 		$(srcdir)/assembler/wtf \
